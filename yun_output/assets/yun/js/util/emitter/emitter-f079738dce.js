define(function(){function t(t){if(t)return e(t)}function e(e){for(var s in t.prototype)e[s]=t.prototype[s];return e}return t.prototype.on=t.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},t.prototype.once=function(t,e){function s(){i.off(t,s),e.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},s.fn=e,this.on(t,s),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s=this._callbacks[t];if(!s)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var i,r=0;r<s.length;r++)if(i=s[r],i===e||i.fn===e){s.splice(r,1);break}return this},t.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),s=this._callbacks[t];if(s){s=s.slice(0);for(var i=0,r=s.length;i<r;++i)s[i].apply(this,e)}return this},t.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},t.prototype.hasListeners=function(t){return!!this.listeners(t).length},t});